# 裏2shot機能（開発版）
## 概要
裏2shot機能
## 今後の変更について
- Bot再起動時の処理を追加
    - Bot停止中に隠れていた待機VCの見える化
    - Bot停止中に空室になったVCの削除
- インチャで音楽Botなどを弄った際にノックボタンが最下部に移動しない問題の修正
- 設定時にロール選択やカテゴリ選択，色指定などが選択式ではなくIDやカラーコードになっている問題の修正
## 設定方法(新規)
1. `/裏2shot 新規作成 <プリセット名>`
    - 複数のパターンの裏2shotが作成できるのでプリセット名を設定してください。
1. 設定用パネルから設定してください。
    →「設定方法(パネル)」を参照
## 設定方法(既存)
1. `/裏2shot 設定変更 <プリセット名>`
    - `<プリセット名>`で既存の設定名の候補が出てくるのでそこから設定を開いてください。
1. 設定用パネルから設定してください。
    →「設定方法(パネル)」を参照
## 設定方法(パネル)
### プリセット名変更(任意)
1. 表示される入力欄に新たなプリセット名を入力して送信する
    - コマンド使用時のプリセット名を変更できます。
### ベースロール設定(必須)
1. [ベースロール登録(必須)]ボタンを押下する
1. 裏2shotを作成するにあたって対象となるロールの指定
    - 性別ロール
    - マッチングロールを複数指定する場合は「,」を入力することで設定できます。
      ※LGBTQ+のある鯖では「男性 → 女性 / LGBTQ+」という設定もできます。
### ベース付属必須ロール設定(任意)
1. [ベース付属必須ロール設定(任意)]ボタンを押下する
1. 裏2shotを作成するにあたって必要となるロールの指定
1. 表示される入力欄に裏2shotを作成するにあたって必要となるロールIDを入力します。
    - マッチングロールを複数指定する場合は「,」を入力することで設定できます。
    - 本メンバーロールなど
    - 裏2shot作成用チャンネルを見えなくしている場合設定不要
    - マッチングロールを複数指定する場合は「,」を入力することで設定できます。
      ※LGBTQ+のある鯖では「男性 → 女性 / LGBTQ+」という設定もできます。
### マッチングロール設定(必須)
1. [マッチングロール設定(必須)]ボタンを押下する
1. 表示されるベースロール選択からベースロールを指定する
1. 表示される入力欄に設定したいマッチングロールIDを入力します。
    - マッチングロールを複数指定する場合は「,」を入力することで設定できます。
      ※LGBTQ+のある鯖では「男性 → 女性 / LGBTQ+」という設定もできます。
### パネル名設定(任意)
1. 表示される入力欄にパネル名(埋め込みタイトル)を入力して送信する
    - 設定しなかった場合「裏2shot 作成パネル」と表示される
### パネル説明(任意)
1. 表示される入力欄にパネル名(埋め込み説明)を入力して送信する
    - 設定しなかった場合「[作成]ボタンを押下すると裏2shotが作成できます。」と表示される
### パネル色設定(任意)
1. 表示される入力欄にパネル色(埋め込み色)を#とカラーコード6文字で入力して送信する
    - 設定しなかった場合「#000000」と表示される
### カテゴリ指定(任意)
1. 表示される入力欄にカテゴリIDを入力して送信する
    - 裏2shotVCを作成するカテゴリを指定できます。
    - 複数指定する場合は「,」を入力することで設定できます。
    - 指定しなかった場合はパネル設置チャンネルと同じカテゴリに作成されます。
### 生成VC名(任意)
1. 表示される入力欄に生成されるVC名を入力して送信する
    - プレースホルダとして以下を使用できます
        - `&(name)`で作者名に置き換わります
        - `&(display_name)`で作者のサーバー内表示名に置き換わります
        - `&(role_name)`で作者の持つベースロール名に置き換わります
    - 設定しない場合は「`🔒2shot-&(display_name)`」となります。
### 生成VC名(ロール名)(任意)
1. 表示される入力欄に生成されるVC名を入力して送信する(高度設定)
    - 作成者のベースロール名を正規表現を使用して設定できます。
    - プレースホルダとして以下を使用できます
        - `&(数字)`で正規表現の各パーツに置き換わります(数字は0～)
        - `&(name)`で作者名に置き換わります
        - `&(display_name)`で作者のサーバー内表示名に置き換わります
        - `&(role_name)`で作者の持つベースロール名に置き換わります
    - この設定は「生成VC名正規表現(ロール名)」が設定されている場合に有効です。
    - ベースロール名が正規表現にマッチしない場合は「生成VC名」が使用されます。
        - 例： ベースロール名が「@男性‐ドM」の時生成VC名(ロール名)を「🚪&(1) - &(0)」とし，生成VC名正規表現(ロール名)を「`^(.+?)[-－ー‐](.+?)$`」とすることで「`🚪ドM - 男性`」というVCができる
    - この高度設定はある程度正規表現に慣れている方向けの設定です。
      ※正規表現に関してはサポートを行えない場合があります。
### 生成VC名正規表現(ロール名)(任意)
1. 表示される入力欄に生成されるVC名を入力して送信する(高度設定)
    - 作成者のベースロール名を正規表現を使用して設定できます。
    - この設定は「生成VC名(ロール名)」が設定されている場合に有効です。
    - ベースロール名が正規表現にマッチしない場合は「生成VC名」が使用されます。
        - 例： ベースロール名が「@男性‐ドM」の時生成VC名(ロール名)を「🚪&(1) - &(0)」とし，生成VC名正規表現(ロール名)を「`^(.+?)[-－ー‐](.+?)$`」とすることで「`🚪ドM - 男性`」というVCができる
    - この高度設定はある程度正規表現に慣れている方向けの設定です。
      ※正規表現に関してはサポートを行えない場合があります。
## 設置方法
1. `/裏2shot パネル設置 <プリセット名>`
    - `<プリセット名>`で既存の設定名の候補が出てくるのでそこから設定を開いてください。
1. パネルが設置されます。
## ⚙️ 裏2shotの使い方
# 🚪 裏2shotについて
### ⚒️ 作成方法
1. [作成]ボタンを押下するとあなたにしか見えない裏2shotVCが作成される。
2. 裏2shotVCに入ると他性別にしか見えないお部屋ができる。
    - 設定したベースロールとマッチングロールで見える見えないの関係性ができます。
### 🚪 入室方法
1. 入りたい裏2shotVCのインチャを開く
1. [ノック]ボタンを押下する
1. 30秒間入れるVCになるので入室する
  - 30秒間は他の人に見えないVCになります。
  - 30秒が経過しても入室しなければ元の状態に戻ります。
1. 入室するとそのまま他の人に見えないVCとして継続します。
1. 片方が退室して改めて裏2shotとして待機したい場合は再度VCを作成しなおしてください。